---
id: 91
title: Foreclosed
date: 2017-02-07
author: QL
layout: post
guid: http://www.quantifylouisville.com/?p=90
permalink: /crimez/
categories:
  - Uncategorized
tags:
  - Government
  - LouieStat
  - Foreclosures
---

<h1><big><b> ANALYZING LOUISVILLE Crime Data Part I</b></big></h1>

<h4><b> The Data </b></h4>
For our initial exploration of this data set, we tackled crimes reports from the last five years [2012 - 2016](https://data.louisvilleky.gov/dataset/crime-data).





<h4><b> Things To Do Today </b></h4>

* Get the data in...
* Do things to it...
* Look at it...
* Say things about it...
* ~~Commit a few crimes and track how long it takes to impact the data~~


```{r, load packages and such, echo=FALSE, results='hide',message=FALSE}

options(scipen=999) # turn off scientific notation, just in case. Since... this isn't science. 


library(tidyverse)
library(lubridate)
library(plyr)
library(data.table)
library(rvest)
library(knitr)


crimes2016 <- fread('https://data.louisvilleky.gov/sites/default/files/Crime_Data_2016_9.csv')
crimes2015 <- fread('https://data.louisvilleky.gov/sites/default/files/Crime_Data_2015.csv')
crimes2014 <- fread('https://data.louisvilleky.gov/sites/default/files/Crime_Data_2014.csv')
crimes2013 <- fread('https://data.louisvilleky.gov/sites/default/files/Crime_Data_2013.csv')
crimes2012 <- fread('https://data.louisvilleky.gov/sites/default/files/Crime_Data_2012.csv')
crimes2011 <- fread('https://data.louisvilleky.gov/sites/default/files/Crime_Data_2011.csv')
crimes2010 <- fread('https://data.louisvilleky.gov/sites/default/files/Crime_Data_2010.csv')
crimes2009 <- fread('https://data.louisvilleky.gov/sites/default/files/Crime_Data_2009.csv')
crimes2008 <- fread('https://data.louisvilleky.gov/sites/default/files/Crime_Data_2008.csv')
crimes2007 <- fread('https://data.louisvilleky.gov/sites/default/files/Crime_Data_2007.csv')

crimes <- rbind(crimes2007,
                crimes2008,
                crimes2009,
                crimes2010,
                crimes2011,
                crimes2012,
                crimes2013,
                crimes2014,
                crimes2015,
                crimes2016)









```



<h4><b> Hilarious Outliers </b></h4>

One of the first steps to reviewing a new data set is to try to tease out outliers. Doing so can highlight weaknesses in how the data was captured. For example, one easy way that tends to yield silly results is to create comparisons between dates in the set and intepret the outliers literally. In this particular data set, both the date a crime occured and the time it was reported are captured. 


```{r, Some Data Work,  echo=FALSE, results='hide',message=FALSE}


#change the dates to R dates so we can math them
crimes$DATE_REPORTED <- ymd_hms(crimes$DATE_REPORTED)
crimes$DATE_OCCURED <- ymd_hms(crimes$DATE_OCCURED)

#define a variable that represents the number of 
crimes <-
  crimes %>%
  mutate(TimeUntilReport =  difftime(crimes$DATE_REPORTED,crimes$DATE_OCCURED, units = "days"))




```


```{r, Grudges & Minority Report Data Sets,  echo=FALSE,message=FALSE, results = 'hide',warning= FALSE}

#pull out any that are reported more than a year after they occured
crimesOLD <- 
  crimes %>%
  dplyr::filter(TimeUntilReport > 365) %>%
  dplyr::group_by(CRIME_TYPE) %>%
  dplyr::summarise(NumberOfCrimes = length(CRIME_TYPE))

MinorityReport <-
   crimes %>%
  dplyr::filter(TimeUntilReport < 0) %>%
  dplyr::group_by(CRIME_TYPE) %>%
  dplyr::summarise(NumberOfCrimes = length(CRIME_TYPE))




crimesOLD$NumberOfCrimes <-
  as.integer(crimesOLD$NumberOfCrimes)

crimesOLD <-  crimesOLD[order(-crimesOLD$NumberOfCrimes),] 

crimeOLDandDisturbing <-
  crimes %>%
  filter(CRIME_TYPE == "DISTURBING THE PEACE" &
           TimeUntilReport > 365)


crimeOLDandFraud <-
  crimes %>%
  filter(CRIME_TYPE == "FRAUD" &
           TimeUntilReport > 365)

crimesOLD$CRIME_TYPE <-
  factor(crimesOLD$CRIME_TYPE)



MinorityReport$NumberOfCrimes <-
  as.integer(MinorityReport$NumberOfCrimes)

MinorityReport <-  MinorityReport[order(-MinorityReport$NumberOfCrimes),] 


MinorityReport$CRIME_TYPE <-
  factor(MinorityReport$CRIME_TYPE)



```
Some crimes appear to be reported days, weeks, and sometimes even *years* after they occurred. The visual below tallies any crime from ten years that was reported at least one year after it allegedly perpetrated. 
```{r, Older than a year graph,  echo=FALSE,message=FALSE,warning= FALSE}

ggplot(crimesOLD,
       aes(reorder(CRIME_TYPE,
                  NumberOfCrimes),
           NumberOfCrimes))+
  geom_bar(stat = "identity",color = "red", fill = "light blue", alpha = 1/2)+
  coord_flip()+
  ylab("Number of Crimes Reported 2007-2016 Occurring a Year Prior")+
  xlab("Type of Crime Reported")+
  theme_minimal()


```


Understandably, sexual assults and identity thefts make up a large portion of the crimes with a long lag between their occurence and report. However, someone also waited over 12 years to report a stolen firearm and a burglary on 24th Street wasn't reported for over a decade ("Should I call the cops? Does that *really* qualify as a burglary? Maybe I should sleep on it for one more night and see how I feel in the morning.").

Perhaps the most baffling the records include the 32 times in the last ten years in which someone waiting over a year to report that someone was Disturbing The Peace. While the majority of those appear to be prostitution related, one record seems to indicate that someone waited SEVEN YEARS to report that someone got a little crazy in a 7th street bar. 

At the other extreme, some crimes appear to have been reported before they even occurred. These Minority-Report crimes, in theory, should be fairly easy to prevent. 

```{r, Minority Report Graph,  echo=FALSE,message=FALSE,warning= FALSE}

ggplot(MinorityReport,
       aes(reorder(CRIME_TYPE,
                  NumberOfCrimes),
           NumberOfCrimes))+
  geom_bar(stat = "identity",color = "red", fill = "light blue", alpha = 1/2)+
  coord_flip()+
  ylab("Number of Crimes 2007-2016 Reported Before They Occurred")+
  xlab("Type of Crime Reported")+
  theme_minimal()


```